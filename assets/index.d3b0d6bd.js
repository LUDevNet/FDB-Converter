import"./vendor.2c05f1c4.js";const b=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const d of t.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}};b();let u=!0,l=null,a=null;const f=document.getElementById("fts-chip"),m=document.getElementById("stf-chip"),o=document.getElementById("file"),v=document.getElementById("error"),p=document.getElementById("error-file-type"),E=document.getElementById("error-close"),g=document.getElementById("error-file-type-close"),L=document.getElementById("file-icon"),y=document.getElementById("loader"),n=document.getElementById("drop-area");f.addEventListener("click",()=>{f.classList.remove("border"),m.classList.add("border"),document.querySelectorAll(".fts").forEach(s=>s.classList.remove("invisible")),document.querySelectorAll(".stf").forEach(s=>s.classList.add("invisible")),o.setAttribute("accept",".fdb"),u=!0});m.addEventListener("click",()=>{m.classList.remove("border"),f.classList.add("border"),document.querySelectorAll(".stf").forEach(s=>s.classList.remove("invisible")),document.querySelectorAll(".fts").forEach(s=>s.classList.add("invisible")),o.setAttribute("accept",".sqlite"),u=!1});n.addEventListener("dragover",()=>n.classList.remove("border"));n.addEventListener("dragleave",()=>n.classList.add("border"));E.addEventListener("click",()=>v.classList.remove("active"));g.addEventListener("click",()=>p.classList.remove("active"));o.addEventListener("change",async()=>{a&&window.URL.revokeObjectURL(a);const s=o.files[0];o.value=null,v.classList.remove("active"),p.classList.remove("active");let r,i;if(u?(r="fdb",i="sqlite"):(r="sqlite",i="fdb"),!s.name.endsWith("."+r)){p.classList.add("active"),n.classList.add("border");return}L.classList.add("invisible"),y.classList.remove("invisible"),o.disabled=!0,l||(l=await Module());const c=new Uint8Array(await s.arrayBuffer());l.FS.writeFile("input."+r,c);let e;try{l.ccall(r+"_to_"+i,null)}catch{v.classList.add("active");return}finally{l.FS.unlink("input."+r),L.classList.remove("invisible"),y.classList.add("invisible"),o.disabled=!1,n.classList.add("border")}e=l.FS.readFile("output."+i),l.FS.unlink("output."+i),a=window.URL.createObjectURL(new Blob([e],{type:"application/octet-stream"}));const t=document.createElement("a");t.href=a,t.download=s.name.split(".").slice(0,-1).join(".")+"."+i,document.body.appendChild(t),t.click(),t.remove()});
